<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Galaxy Shooter Realistic</title>
<style>
html,body{margin:0;overflow:hidden;background:black;}
canvas{display:block;}
#ui{position:fixed;top:10px;left:10px;color:white;font-family:monospace;font-size:20px;}
#gameOver{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:white;font-family:monospace;font-size:40px;text-align:center;display:none;}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="ui">Score: 0</div>
<div id="gameOver">
<div>GAME OVER</div>
<div style="font-size:20px;">Press R to Restart</div>
</div>

<script>
const canvas=document.getElementById('canvas'),ctx=canvas.getContext('2d');
canvas.width=innerWidth; canvas.height=innerHeight;

// Load spaceship sprite
const playerImg=new Image(); playerImg.src='https://i.imgur.com/3c9bT2x.png';
const enemyImg=new Image(); enemyImg.src='https://i.imgur.com/6Xq0X5k.png';
const bulletImg=new Image(); bulletImg.src='https://i.imgur.com/rdJv5Nb.png';
const explosionImg=new Image(); explosionImg.src='https://i.imgur.com/1HhLrVv.png'; // small explosion sprite

// Game state
let score=0,gameOver=false;
let player={x:canvas.width/2,y:canvas.height-100,width:60,height:60,speed:6};
let bullets=[],enemies=[],particles=[],stars=[];

// Generate realistic stars
for(let i=0;i<300;i++) stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,size:1+Math.random()*2,spd:0.2+Math.random()*1,brightness:Math.random()});

// Input
let left=false,right=false,shoot=false;
document.addEventListener('keydown',e=>{if(e.key==='ArrowLeft') left=true;if(e.key==='ArrowRight') right=true;if(e.key===' ') shoot=true;if(e.key==='r'||e.key==='R') if(gameOver) resetGame();});
document.addEventListener('keyup',e=>{if(e.key==='ArrowLeft') left=false;if(e.key==='ArrowRight') right=false;if(e.key===' ') shoot=false;});

// Reset
function resetGame(){score=0;bullets=[];enemies=[];particles=[];gameOver=false;player.x=canvas.width/2;document.getElementById('gameOver').style.display='none';}

// Bullet fire
function fireBullet(){bullets.push({x:player.x,y:player.y-30,width:10,height:30,speed:12});}

// Spawn enemies
function spawnEnemy(){enemies.push({x:Math.random()*(canvas.width-50),y:-60,width:50,height:50,speed:2});}
setInterval(()=>{if(!gameOver) spawnEnemy();},1200);

// Particle explosion
function createExplosion(x,y){for(let i=0;i<20;i++){particles.push({x,y,vx:(Math.random()-0.5)*6,vy:(Math.random()-0.5)*6,life:20+Math.random()*20,size:2+Math.random()*4,color:'orange'}); }}

// Game loop
function loop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Stars background
    stars.forEach(s=>{s.y+=s.spd; if(s.y>canvas.height) {s.y=0; s.x=Math.random()*canvas.width;} ctx.fillStyle=`rgba(255,255,255,${s.brightness})`; ctx.fillRect(s.x,s.y,s.size,s.size); });

    if(!gameOver){
        // Player movement
        if(left) player.x-=player.speed;if(right) player.x+=player.speed;
        player.x=Math.max(player.width/2,Math.min(canvas.width-player.width/2,player.x));

        // Shooting
        if(shoot && bullets.length<10) fireBullet();

        // Bullets
        bullets.forEach((b,i)=>{b.y-=b.speed; if(b.y<-30) bullets.splice(i,1); ctx.drawImage(bulletImg,b.x-b.width/2,b.y-b.height,b.width,b.height);});

        // Enemies
        enemies.forEach((e,i)=>{
            e.y+=e.speed; ctx.drawImage(enemyImg,e.x,e.y,e.width,e.height);
            bullets.forEach((b,j)=>{
                if(b.x>b.x && b.x<b.x+e.width && b.y>b.y && b.y<b.y+e.height){
                    bullets.splice(j,1); createExplosion(e.x+e.width/2,e.y+e.height/2); enemies.splice(i,1); score+=100;
                }
            });
            if(player.x-player.width/2<e.x+e.width && player.x+player.width/2>e.x && player.y-player.height/2<e.y+e.height && player.y+player.height/2>e.y){
                gameOver=true;
            }
        });
    }

    // Particles
    particles.forEach((p,i)=>{p.x+=p.vx;p.y+=p.vy;p.life--;ctx.fillStyle=p.color;ctx.globalAlpha=p.life/40;ctx.fillRect(p.x,p.y,p.size,p.size);if(p.life<=0) particles.splice(i,1);});
    ctx.globalAlpha=1;

    // Draw player
    ctx.drawImage(playerImg,player.x-player.width/2,player.y-player.height/2,player.width,player.height);

    document.getElementById('ui').innerText='Score: '+score;

    if(gameOver) document.getElementById('gameOver').style.display='block';

    requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
